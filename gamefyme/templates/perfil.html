{% load static %}
<div class="profile-section">
    <div class="avatar-container">
        <div class="avatar">
            <div class="avatar" onclick="abrirModalAvatar()">
                <img src="{% static 'img/avatares/' %}{{ usuario.imagem_perfil }}" alt="Avatar" class="avatar-atual" />
              </div>
        </div>
    </div>
    <div class="profile-info">
        <h2 class="nmusuario">{{ usuario.nmusuario }}</h2>
        <p class="user-date">{{ usuario.dtnascimento|date:"d/m/Y" }}</p>
        <div class="streak-container">
            <div class="streak-title">Dias consecutivos de atividades completas:</div>
            <div class="weekdays">
              
                <div class="weekdays-div">
                    {% for dia in streak_data %}
                        <div class="weekday" title="{{ dia.data|date:'d/m/Y' }}">
                            <div class="weekday-label">{{ dia.dia_semana }}</div>
                            <div>
                                {% if dia.concluiu %}
                                <div class="weekday-icon">
                                    <img src="{% static 'img/fogo-ativo.png' %}" alt="Concluiu">
                                </div>
                                {% else %}
                                <div class="weekday-icon">
                                    <img src="{% static 'img/fogo-inativo.png' %}" alt="Não concluiu">
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="level">
                <span class="level-number">Nível: <span class="nivel-circle">{{ usuario.nivelusuario }}</span></span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {% widthratio usuario.expusuario 1000 100 %}%">
                        <div class="progress-text">
                            <span style="margin-left: 80px;">{{ usuario.expusuario }}</span><span>/1000</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="btn-perfil">
        {% if not esconder_add %}
            <a href="{% url 'atividades:atividade' %}" class="btn-perfil add-task-btn with-loading" style="color: #00cc7a;">
                Add Tarefa
            </a>
        {% endif %}
        {% if exibir_voltar %}
            <a href="{% url 'usuarios:main' %}" id="btnVoltar" class="btn-perfil btn-finalizar with-loading" style="color: #ffe066;">
                Voltar
            </a>
        {% endif %}
    </div>
</div>

<div id="avatarModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
      <span class="close-modal" onclick="fecharModalAvatar()">&times;</span>
      <div class="modal-header">
        <h3>Escolha seu Avatar</h3>
      </div>
      <form id="formAvatar" method="POST" action="{% url 'usuarios:config_usuario' %}">
        {% csrf_token %}
        <div class="modal-body" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
          {% for img in avatares_disponiveis %}
            <label style="cursor: pointer;">
              <input type="radio" name="imagem_perfil" value="{{ img }}" style="display: none;" {% if usuario.imagem_perfil == img %}checked{% endif %}>
              <img src="{% static 'img/avatares/' %}{{ img }}" class="avatar-select" onclick="document.getElementById('formAvatar').submit();" />
            </label>
          {% endfor %}
        </div>
      </form>
    </div>
</div>
  
  