<div id="relatorioModal" class="modal">
    <div class="modal-content" style="
        position: relative;
        background: linear-gradient(to bottom, var(--roxo-card3), var(--roxo-card4));
        margin: 3% auto;
        padding: 24px;
        border-radius: 16px;
        width: 95%;
        max-width: 1200px;
        height: 90vh;
        border: 2px solid var(--roxo-card2);
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        display: flex;
        flex-direction: column;
    ">
        <span class="close-modal" onclick="closeRelatorioModal()">&times;</span>
        <div class="modal-header" style="margin-bottom: 20px;">
            <h3>Gerar Relatório</h3>
        </div>
        <div class="modal-body">
            <form id="formRelatorio" style="width: 100%; display: flex; flex-wrap: wrap; gap: 12px; align-items: flex-end; justify-content: center;">
                <div style="min-width: 200px; flex: 1;">
                    <label for="data_inicio" style="font-weight: bold; color: #fff; margin-bottom: 6px; display: block;">Data início:</label>
                    <input type="date" name="data_inicio" id="data_inicio" required
                           style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #e0e0e0; background: #fafafa; color: #222;">
                </div>
                <div style="min-width: 200px; flex: 1;">
                    <label for="data_fim" style="font-weight: bold; color: #fff; margin-bottom: 6px; display: block;">Data fim:</label>
                    <input type="date" name="data_fim" id="data_fim" required
                           style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #e0e0e0; background: #fafafa; color: #222;">
                </div>
                <div style="min-width: 150px;">
                    <button type="submit" class="btnPDF" id="btnGerarPDF" style="width: 100%;">
                        <span class="btn-text">Gerar PDF</span>
                        <span class="btn-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </div>
                <div style="min-width: 150px;">
                    <button type="button" onclick="toggleFullscreenRelatorio()" class="btnPDF" style="width: 100%; background-color: var(--roxo-card2);">
                        Tela Cheia
                    </button>
                </div>
            </form>
            
        </div>
        
        <div class="modal-body" style="flex: 1; margin-top:16px;">
            <iframe id="iframeRelatorio"
                    style="width:100%; height:100%; border:1px solid #333; border-radius: 10px;"
                    src=""></iframe>
        </div>
    </div>
</div>

<script>
    function toggleFullscreenRelatorio() {
        const iframe = document.getElementById('iframeRelatorio');
        if (!document.fullscreenElement) {
            iframe.requestFullscreen().catch(err => {
                alert(`Erro ao entrar em tela cheia: ${err.message}`);
            });
        } else {
            document.exitFullscreen();
        }
    }
</script>